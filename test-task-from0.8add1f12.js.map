{"mappings":"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","sources":["src/js/test-task-from0.js"],"sourcesContent":["function generateRandomNumbers() {\n  const numbers = [];\n  for (let i = 0; i < 4; i++) {\n    const randomNumber = Math.floor(Math.random() * 10);\n    numbers.push(randomNumber);\n  }\n  const id = numbers.join('');\n  return id;\n}\n\nconst input = document.getElementById('user-input');\nconst text = document.getElementById('user-output');\nconst ok = document.getElementById('ok-button');\nconst bigZone = document.body;\n\nlet isMouseDown = false;\nlet selectionStartIndex = -1;\nlet selectionEndIndex = -1;\nlet dataToDrag = [];\n\ntext.addEventListener('mousedown', handleMouseDown);\ndocument.addEventListener('mouseup', handleMouseUp);\ntext.addEventListener('mousemove', handleMouseMove);\ntext.addEventListener('click', handleClick);\n\nfunction handleMouseDown(event) {\n  isMouseDown = true;\n  const startIndex = Array.from(text.children).indexOf(event.target);\n  selectionStartIndex = startIndex;\n  selectionEndIndex = startIndex;\n  handleSelection(selectionStartIndex, selectionEndIndex);\n}\n\nfunction isMouseOverSpan(event) {\n  const elementMouseIsOver = document.elementFromPoint(\n    event.clientX,\n    event.clientY\n  );\n  return elementMouseIsOver.tagName.toLowerCase() === 'span';\n}\n\nfunction handleMouseUp(event) {\n  if (isMouseDown && dataToDrag.length > 0 && isMouseOverSpan(event)) {\n    createCombinedSpan();\n  }\n  isMouseDown = false;\n}\n\nfunction handleMouseMove(event) {\n  if (isMouseDown) {\n    const endIndex = Array.from(text.children).indexOf(event.target);\n    selectionEndIndex = endIndex;\n    handleSelection(selectionStartIndex, selectionEndIndex);\n  }\n}\n\nfunction handleClick(event) {\n  const target = event.target;\n  if (target.tagName.toLowerCase() === 'span') {\n    if (!event.ctrlKey) {\n      clearSelection();\n    }\n    toggleSelection(target);\n  }\n}\n\nfunction handleSelection(startIndex, endIndex) {\n  const spans = text.querySelectorAll('.item');\n  spans.forEach((span, index) => {\n    if (index >= startIndex && index <= endIndex) {\n      span.classList.add('selected');\n\n      const id = span.id;\n      if (!dataToDrag.includes(id)) {\n        dataToDrag.push(id);\n      }\n    } else {\n      span.classList.remove('selected');\n\n      const idIndex = dataToDrag.indexOf(span.id);\n      if (idIndex !== -1) {\n        dataToDrag.splice(idIndex, 1);\n      }\n    }\n  });\n}\n\nconsole.log(dataToDrag);\n\nfunction clearSelection() {\n  const selectedSpans = text.querySelectorAll('.selected');\n  selectedSpans.forEach(span => {\n    span.classList.remove('selected');\n  });\n}\n\nok.addEventListener('click', () => {\n  const inputValue = input.value;\n\n  inputValue.split('').forEach(letter => {\n    const span = document.createElement('span');\n    span.setAttribute('draggable', 'true');\n    span.setAttribute('id', generateRandomNumbers());\n    span.classList.add('item');\n    span.textContent = letter;\n    text.appendChild(span);\n\n    span.addEventListener('dragstart', event => {\n      event.dataTransfer.setData('text/plain', event.target.id);\n    });\n\n    span.addEventListener('dragend', event => {\n      event.target.style.opacity = '';\n    });\n  });\n});\n\nfunction createCombinedSpan() {\n  const combinedSpan = document.createElement('span');\n  combinedSpan.setAttribute('draggable', 'true');\n  combinedSpan.setAttribute('id', generateRandomNumbers());\n  combinedSpan.classList.add('combined-item');\n\n  const selectedSpans = text.querySelectorAll('.selected');\n\n  const firstSelectedSpan = selectedSpans[0]; // Get the first selected span\n  const parentElement = firstSelectedSpan.parentNode; // Get the parent node of the first selected span\n\n  // Insert the combined span before the first selected span\n  parentElement.insertBefore(combinedSpan, firstSelectedSpan);\n\n  selectedSpans.forEach(span => {\n    combinedSpan.textContent += span.textContent;\n    span.parentNode.removeChild(span);\n  });\n\n  clearSelection();\n\n  combinedSpan.addEventListener('dragstart', event => {\n    event.dataTransfer.setData('text/plain', combinedSpan.id);\n  });\n\n  combinedSpan.addEventListener('dragend', event => {\n    event.target.style.opacity = '';\n  });\n}\n\nfunction allowDrop(event) {\n  event.preventDefault();\n}\n\ntext.ondragover = allowDrop;\nbigZone.ondragover = allowDrop;\n\ntext.ondrop = drop;\nbigZone.ondrop = dropOnTheBody;\n\nfunction drop(event) {\n  event.preventDefault();\n  let itemId = event.dataTransfer.getData('text/plain');\n  let draggedElement = document.getElementById(itemId);\n  let target = event.target.closest('.item');\n\n  if (draggedElement) {\n    if (target) {\n      if (\n        event.clientY <\n        target.getBoundingClientRect().top + target.offsetHeight / 2\n      ) {\n        target.parentNode.insertBefore(draggedElement, target);\n      } else {\n        target.parentNode.insertBefore(draggedElement, target.nextSibling);\n      }\n    } else {\n      text.appendChild(draggedElement);\n    }\n\n    draggedElement.style.position = '';\n    draggedElement.style.left = '';\n    draggedElement.style.top = '';\n  }\n}\n\nfunction dropOnTheBody(event) {\n  if (event.target === text || text.contains(event.target)) {\n    return;\n  }\n\n  event.preventDefault();\n  let itemId = event.dataTransfer.getData('text/plain');\n  let draggedElement = document.getElementById(itemId);\n\n  draggedElement.style.position = 'absolute';\n  draggedElement.style.left = event.clientX + 'px';\n  draggedElement.style.top = event.clientY + 'px';\n\n  bigZone.appendChild(draggedElement);\n}\n\nfunction toggleSelection(span) {\n  if (span.classList.contains('selected')) {\n    span.classList.remove('selected');\n  } else {\n    span.classList.add('selected');\n  }\n}\n"],"names":["$86ba8b39b5c36da0$var$generateRandomNumbers","numbers","i","randomNumber","Math","floor","random","push","join","$86ba8b39b5c36da0$var$input","document","getElementById","$86ba8b39b5c36da0$var$text","$86ba8b39b5c36da0$var$ok","$86ba8b39b5c36da0$var$bigZone","body","$86ba8b39b5c36da0$var$isMouseDown","$86ba8b39b5c36da0$var$selectionStartIndex","$86ba8b39b5c36da0$var$dataToDrag","$86ba8b39b5c36da0$var$handleSelection","startIndex","endIndex","querySelectorAll","forEach","span","index","classList","add","id","includes","remove","idIndex","indexOf","splice","$86ba8b39b5c36da0$var$clearSelection","$86ba8b39b5c36da0$var$allowDrop","event","preventDefault","addEventListener","Array","from","children","target","length","elementFromPoint","clientX","clientY","tagName","toLowerCase","$86ba8b39b5c36da0$var$isMouseOverSpan","combinedSpan","createElement","setAttribute","selectedSpans","firstSelectedSpan","parentNode","insertBefore","textContent","removeChild","dataTransfer","setData","style","opacity","$86ba8b39b5c36da0$var$createCombinedSpan","ctrlKey","contains","console","log","value","split","letter","appendChild","ondragover","ondrop","itemId","getData","draggedElement","closest","getBoundingClientRect","top","offsetHeight","nextSibling","position","left"],"version":3,"file":"test-task-from0.8add1f12.js.map"}