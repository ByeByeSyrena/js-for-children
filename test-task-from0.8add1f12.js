!function(){function e(){for(var e=[],t=0;t<4;t++){var n=Math.floor(10*Math.random());e.push(n)}return e.join("")}var t=document.getElementById("user-input"),n=document.getElementById("user-output"),a=document.getElementById("ok-button"),r=document.body,o=!1,i=-1,d=[];function s(e,t){n.querySelectorAll(".item").forEach((function(n,a){if(a>=e&&a<=t){n.classList.add("selected");var r=n.id;d.includes(r)||d.push(r)}else{n.classList.remove("selected");var o=d.indexOf(n.id);-1!==o&&d.splice(o,1)}}))}function c(){n.querySelectorAll(".selected").forEach((function(e){e.classList.remove("selected")}))}function l(e){e.preventDefault()}n.addEventListener("mousedown",(function(e){o=!0;var t=Array.from(n.children).indexOf(e.target);s(i=t,t)})),document.addEventListener("mouseup",(function(t){o&&d.length>0&&function(e){return"span"===document.elementFromPoint(e.clientX,e.clientY).tagName.toLowerCase()}(t)&&function(){var t=document.createElement("span");t.setAttribute("draggable","true"),t.setAttribute("id",e()),t.classList.add("combined-item");var a=n.querySelectorAll(".selected"),r=a[0];r.parentNode.insertBefore(t,r),a.forEach((function(e){t.textContent+=e.textContent,e.parentNode.removeChild(e)})),c(),t.addEventListener("dragstart",(function(e){e.dataTransfer.setData("text/plain",t.id)})),t.addEventListener("dragend",(function(e){e.target.style.opacity=""}))}();o=!1})),n.addEventListener("mousemove",(function(e){if(o){var t=Array.from(n.children).indexOf(e.target);s(i,t)}})),n.addEventListener("click",(function(e){var t=e.target;"span"===t.tagName.toLowerCase()&&(e.ctrlKey||c(),(n=t).classList.contains("selected")?n.classList.remove("selected"):n.classList.add("selected"));var n})),console.log(d),a.addEventListener("click",(function(){t.value.split("").forEach((function(t){var a=document.createElement("span");a.setAttribute("draggable","true"),a.setAttribute("id",e()),a.classList.add("item"),a.textContent=t,n.appendChild(a),a.addEventListener("dragstart",(function(e){e.dataTransfer.setData("text/plain",e.target.id)})),a.addEventListener("dragend",(function(e){e.target.style.opacity=""}))}))})),n.ondragover=l,r.ondragover=l,n.ondrop=function(e){e.preventDefault();var t=e.dataTransfer.getData("text/plain"),a=document.getElementById(t),r=e.target.closest(".item");a&&(r?e.clientY<r.getBoundingClientRect().top+r.offsetHeight/2?r.parentNode.insertBefore(a,r):r.parentNode.insertBefore(a,r.nextSibling):n.appendChild(a),a.style.position="",a.style.left="",a.style.top="")},r.ondrop=function(e){if(e.target===n||n.contains(e.target))return;e.preventDefault();var t=e.dataTransfer.getData("text/plain"),a=document.getElementById(t);a.style.position="absolute",a.style.left=e.clientX+"px",a.style.top=e.clientY+"px",r.appendChild(a)}}();
//# sourceMappingURL=test-task-from0.8add1f12.js.map
