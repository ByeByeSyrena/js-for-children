function t(){const t=[];for(let e=0;e<4;e++){const e=Math.floor(10*Math.random());t.push(e)}return t.join("")}const e=document.getElementById("user-input"),n=document.getElementById("user-output"),o=document.getElementById("ok-button"),r=document.body;let a=!1,i=-1,s=-1;function d(t){t.classList.contains("selected")?t.classList.remove("selected"):t.classList.add("selected")}function c(){n.querySelectorAll(".selected").forEach((t=>{t.classList.remove("selected")}))}function l(t){t.preventDefault()}n.addEventListener("mousedown",(function(t){a=!0;const e=t.clientX,o=t.clientY,r=Array.from(n.children);i=-1,s=-1,r.forEach(((t,n)=>{const r=t.getBoundingClientRect();e>=r.left&&e<=r.right&&o>=r.top&&o<=r.bottom&&(i=n,s=n,d(t))}))})),document.addEventListener("mouseup",(function(e){a=!1,function(){const e=n.querySelectorAll(".selected");if(0===e.length)return;const o=document.createElement("span");o.setAttribute("draggable","true"),o.setAttribute("id",t()),o.classList.add("combined-item");const r=e[0];r.parentNode.insertBefore(o,r),e.forEach((t=>{o.textContent+=t.textContent,t.parentNode.removeChild(t)})),c(),o.addEventListener("dragstart",(t=>{t.dataTransfer.setData("text/plain",o.id)})),o.addEventListener("dragend",(t=>{t.target.style.opacity=""}))}()})),n.addEventListener("mousemove",(function(t){if(a){const e=t.clientX,o=t.clientY,r=Array.from(n.children);s=-1,r.forEach(((t,n)=>{const r=t.getBoundingClientRect();e>=r.left&&e<=r.right&&o>=r.top&&o<=r.bottom&&(s=n,d(t))}))}})),n.addEventListener("click",(function(t){const e=t.target;"span"===e.tagName.toLowerCase()&&(t.ctrlKey||c(),d(e))})),o.addEventListener("click",(()=>{e.value.split("").forEach((e=>{const o=document.createElement("span");o.setAttribute("draggable","true"),o.setAttribute("id",t()),o.classList.add("item"),o.textContent=e,n.appendChild(o),o.addEventListener("dragstart",(t=>{t.dataTransfer.setData("text/plain",t.target.id)})),o.addEventListener("dragend",(t=>{t.target.style.opacity=""}))}))})),n.ondragover=l,r.ondragover=l,n.ondrop=function(t){t.preventDefault();let e=t.dataTransfer.getData("text/plain"),o=document.getElementById(e),r=t.target.closest(".item");o&&(r?t.clientY<r.getBoundingClientRect().top+r.offsetHeight/2?r.parentNode.insertBefore(o,r):r.parentNode.insertBefore(o,r.nextSibling):n.appendChild(o),o.style.position="",o.style.left="",o.style.top="")},r.ondrop=function(t){if(t.target===n||n.contains(t.target))return;t.preventDefault();let e=t.dataTransfer.getData("text/plain"),o=document.getElementById(e);if(!o)return void console.error("Error: Dragged element not found.");if(!r.contains(o))return void console.error("Error: Dragged element is not in the expected container.");o.style.position="absolute",o.style.left=t.clientX+"px",o.style.top=t.clientY+"px",r.appendChild(o)};
//# sourceMappingURL=test-task-xy.b0c4fda3.js.map
