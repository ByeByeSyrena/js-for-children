function e(){const e=[];for(let t=0;t<4;t++){const t=Math.floor(10*Math.random());e.push(t)}return e.join("")}const t=document.getElementById("user-input"),n=document.getElementById("user-output"),a=document.getElementById("ok-button"),o=document.body;let s=!1,r=-1,d=-1,i=[];function l(e,t){n.querySelectorAll(".item").forEach(((n,a)=>{if(a>=e&&a<=t){n.classList.add("selected");const e=n.id;i.includes(e)||i.push(e)}else{n.classList.remove("selected");const e=i.indexOf(n.id);-1!==e&&i.splice(e,1)}}))}function c(){n.querySelectorAll(".selected").forEach((e=>{e.classList.remove("selected")}))}function u(e){e.preventDefault()}n.addEventListener("mousedown",(function(e){s=!0;const t=Array.from(n.children).indexOf(e.target);r=t,d=t,l(r,d)})),document.addEventListener("mouseup",(function(t){s&&i.length>0&&function(e){return"span"===document.elementFromPoint(e.clientX,e.clientY).tagName.toLowerCase()}(t)&&function(){const t=document.createElement("span");t.setAttribute("draggable","true"),t.setAttribute("id",e()),t.classList.add("combined-item");const a=n.querySelectorAll(".selected"),o=a[0];o.parentNode.insertBefore(t,o),a.forEach((e=>{t.textContent+=e.textContent,e.parentNode.removeChild(e)})),c(),t.addEventListener("dragstart",(e=>{e.dataTransfer.setData("text/plain",t.id)})),t.addEventListener("dragend",(e=>{e.target.style.opacity=""}))}();s=!1})),n.addEventListener("mousemove",(function(e){if(s){const t=Array.from(n.children).indexOf(e.target);d=t,l(r,d)}})),n.addEventListener("click",(function(e){const t=e.target;"span"===t.tagName.toLowerCase()&&(e.ctrlKey||c(),(n=t).classList.contains("selected")?n.classList.remove("selected"):n.classList.add("selected"));var n})),console.log(i),a.addEventListener("click",(()=>{t.value.split("").forEach((t=>{const a=document.createElement("span");a.setAttribute("draggable","true"),a.setAttribute("id",e()),a.classList.add("item"),a.textContent=t,n.appendChild(a),a.addEventListener("dragstart",(e=>{e.dataTransfer.setData("text/plain",e.target.id)})),a.addEventListener("dragend",(e=>{e.target.style.opacity=""}))}))})),n.ondragover=u,o.ondragover=u,n.ondrop=function(e){e.preventDefault();let t=e.dataTransfer.getData("text/plain"),a=document.getElementById(t),o=e.target.closest(".item");a&&(o?e.clientY<o.getBoundingClientRect().top+o.offsetHeight/2?o.parentNode.insertBefore(a,o):o.parentNode.insertBefore(a,o.nextSibling):n.appendChild(a),a.style.position="",a.style.left="",a.style.top="")},o.ondrop=function(e){if(e.target===n||n.contains(e.target))return;e.preventDefault();let t=e.dataTransfer.getData("text/plain"),a=document.getElementById(t);a.style.position="absolute",a.style.left=e.clientX+"px",a.style.top=e.clientY+"px",o.appendChild(a)};
//# sourceMappingURL=test-task-from0.bfaa0ed8.js.map
