{"mappings":"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","sources":["src/js/test-task-from0.js"],"sourcesContent":["function generateRandomNumbers() {\n  const numbers = [];\n  for (let i = 0; i < 4; i++) {\n    const randomNumber = Math.floor(Math.random() * 10);\n    numbers.push(randomNumber);\n  }\n  const id = numbers.join('');\n  return id;\n}\n\nconst input = document.getElementById('user-input');\nconst text = document.getElementById('user-output');\nconst ok = document.getElementById('ok-button');\nconst bigZone = document.body;\n\nlet isMouseDown = false;\nlet selectionStartIndex = -1;\nlet selectionEndIndex = -1;\nlet dataToDrag = [];\n\ntext.addEventListener('mousedown', handleMouseDown);\ndocument.addEventListener('mouseup', handleMouseUp);\ntext.addEventListener('mousemove', handleMouseMove);\ntext.addEventListener('click', handleClick);\n\nfunction handleMouseDown(event) {\n  isMouseDown = true;\n  const startIndex = Array.from(text.children).indexOf(event.target);\n  selectionStartIndex = startIndex;\n  selectionEndIndex = startIndex;\n  handleSelection(selectionStartIndex, selectionEndIndex);\n}\n\nfunction isMouseOverSpan(event) {\n  const elementMouseIsOver = document.elementFromPoint(\n    event.clientX,\n    event.clientY\n  );\n  return elementMouseIsOver.tagName.toLowerCase() === 'span';\n}\n\nfunction handleMouseUp(event) {\n  if (isMouseDown && dataToDrag.length > 0 && isMouseOverSpan(event)) {\n    createCombinedSpan();\n  }\n  isMouseDown = false;\n}\n\nfunction handleMouseMove(event) {\n  if (isMouseDown) {\n    const endIndex = Array.from(text.children).indexOf(event.target);\n    selectionEndIndex = endIndex;\n    handleSelection(selectionStartIndex, selectionEndIndex);\n  }\n}\n\nfunction handleClick(event) {\n  const target = event.target;\n  if (target.tagName.toLowerCase() === 'span') {\n    if (!event.ctrlKey) {\n      clearSelection();\n    }\n    toggleSelection(target);\n  }\n}\n\nfunction handleSelection(startIndex, endIndex) {\n  const spans = text.querySelectorAll('.item');\n  spans.forEach((span, index) => {\n    if (index >= startIndex && index <= endIndex) {\n      span.classList.add('selected');\n\n      const id = span.id;\n      if (!dataToDrag.includes(id)) {\n        dataToDrag.push(id);\n      }\n    } else {\n      span.classList.remove('selected');\n\n      const idIndex = dataToDrag.indexOf(span.id);\n      if (idIndex !== -1) {\n        dataToDrag.splice(idIndex, 1);\n      }\n    }\n  });\n}\n\nconsole.log(dataToDrag);\n\nfunction clearSelection() {\n  const selectedSpans = text.querySelectorAll('.selected');\n  selectedSpans.forEach(span => {\n    span.classList.remove('selected');\n  });\n}\n\nok.addEventListener('click', () => {\n  const inputValue = input.value;\n\n  inputValue.split('').forEach(letter => {\n    const span = document.createElement('span');\n    span.setAttribute('draggable', 'true');\n    span.setAttribute('id', generateRandomNumbers());\n    span.classList.add('item');\n    span.textContent = letter;\n    text.appendChild(span);\n\n    span.addEventListener('dragstart', event => {\n      event.dataTransfer.setData('text/plain', event.target.id);\n    });\n\n    span.addEventListener('dragend', event => {\n      event.target.style.opacity = '';\n    });\n  });\n});\n\nfunction createCombinedSpan() {\n  const combinedSpan = document.createElement('span');\n  combinedSpan.setAttribute('draggable', 'true');\n  combinedSpan.setAttribute('id', generateRandomNumbers());\n  combinedSpan.classList.add('combined-item');\n\n  const selectedSpans = text.querySelectorAll('.selected');\n\n  const firstSelectedSpan = selectedSpans[0]; // Get the first selected span\n  const parentElement = firstSelectedSpan.parentNode; // Get the parent node of the first selected span\n\n  // Insert the combined span before the first selected span\n  parentElement.insertBefore(combinedSpan, firstSelectedSpan);\n\n  selectedSpans.forEach(span => {\n    combinedSpan.textContent += span.textContent;\n    span.parentNode.removeChild(span);\n  });\n\n  clearSelection();\n\n  combinedSpan.addEventListener('dragstart', event => {\n    event.dataTransfer.setData('text/plain', combinedSpan.id);\n  });\n\n  combinedSpan.addEventListener('dragend', event => {\n    event.target.style.opacity = '';\n  });\n}\n\nfunction allowDrop(event) {\n  event.preventDefault();\n}\n\ntext.ondragover = allowDrop;\nbigZone.ondragover = allowDrop;\n\ntext.ondrop = drop;\nbigZone.ondrop = dropOnTheBody;\n\nfunction drop(event) {\n  event.preventDefault();\n  let itemId = event.dataTransfer.getData('text/plain');\n  let draggedElement = document.getElementById(itemId);\n  let target = event.target.closest('.item');\n\n  if (draggedElement) {\n    if (target) {\n      if (\n        event.clientY <\n        target.getBoundingClientRect().top + target.offsetHeight / 2\n      ) {\n        target.parentNode.insertBefore(draggedElement, target);\n      } else {\n        target.parentNode.insertBefore(draggedElement, target.nextSibling);\n      }\n    } else {\n      text.appendChild(draggedElement);\n    }\n\n    draggedElement.style.position = '';\n    draggedElement.style.left = '';\n    draggedElement.style.top = '';\n  }\n}\n\nfunction dropOnTheBody(event) {\n  if (event.target === text || text.contains(event.target)) {\n    return;\n  }\n\n  event.preventDefault();\n  let itemId = event.dataTransfer.getData('text/plain');\n  let draggedElement = document.getElementById(itemId);\n\n  draggedElement.style.position = 'absolute';\n  draggedElement.style.left = event.clientX + 'px';\n  draggedElement.style.top = event.clientY + 'px';\n\n  bigZone.appendChild(draggedElement);\n}\n\nfunction toggleSelection(span) {\n  if (span.classList.contains('selected')) {\n    span.classList.remove('selected');\n  } else {\n    span.classList.add('selected');\n  }\n}\n"],"names":["$2fc20e547aeefbfd$var$generateRandomNumbers","numbers","i","randomNumber","Math","floor","random","push","join","$2fc20e547aeefbfd$var$input","document","getElementById","$2fc20e547aeefbfd$var$text","$2fc20e547aeefbfd$var$ok","$2fc20e547aeefbfd$var$bigZone","body","$2fc20e547aeefbfd$var$isMouseDown","$2fc20e547aeefbfd$var$selectionStartIndex","$2fc20e547aeefbfd$var$selectionEndIndex","$2fc20e547aeefbfd$var$dataToDrag","$2fc20e547aeefbfd$var$handleSelection","startIndex","endIndex","querySelectorAll","forEach","span","index","classList","add","id","includes","remove","idIndex","indexOf","splice","$2fc20e547aeefbfd$var$clearSelection","$2fc20e547aeefbfd$var$allowDrop","event","preventDefault","addEventListener","Array","from","children","target","length","elementFromPoint","clientX","clientY","tagName","toLowerCase","$2fc20e547aeefbfd$var$isMouseOverSpan","combinedSpan","createElement","setAttribute","selectedSpans","firstSelectedSpan","parentNode","insertBefore","textContent","removeChild","dataTransfer","setData","style","opacity","$2fc20e547aeefbfd$var$createCombinedSpan","ctrlKey","contains","console","log","value","split","letter","appendChild","ondragover","ondrop","itemId","getData","draggedElement","closest","getBoundingClientRect","top","offsetHeight","nextSibling","position","left"],"version":3,"file":"test-task-from0.bfaa0ed8.js.map"}